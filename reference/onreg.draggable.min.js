(function($){jQuery.fn.extend({draggable:function(b){var c=$(this);var d={left:0,top:0};var f=c.offset();var g=$("body");g.bind("mousemove",function(e){if(d.left==0){d.left=f.left-e.screenX;d.top=f.top-e.screenY}var a={X:e.screenX,Y:e.screenY};setLocation(c,a,d)});g.mouseup(function(){g.unbind("mousemove")})}});setLocation=function(a,b,c){var d=$(window);var e=b.X+c.left;var f=b.Y+c.top;var g=d.width()+d.scrollLeft()-a.width();var h=d.height()+d.scrollTop()-a.height();e=e<d.scrollLeft()?d.scrollLeft():e>g?g:e;f=f<d.scrollTop()?d.scrollTop():f>h?h:f;a.css({left:e,top:f})}})(jQuery);